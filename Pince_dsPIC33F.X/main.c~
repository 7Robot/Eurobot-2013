/*
* Template dsPIC33F
* Compiler : Microchip xC16
* µC : 33FJ64MC802
* Juillet 2012
*    ____________      _           _
*   |___  /| ___ \    | |         | |
*      / / | |_/ /___ | |__   ___ | |_
*     / /  |    // _ \| '_ \ / _ \| __|
*    / /   | |\ \ (_) | |_) | (_) | |_
*   /_/    |_| \_\___/|____/ \___/'\__|
*			      7robot.fr
*/

#include <p33Fxxxx.h>      /* Includes device header file                     */
#include <stdint.h>        /* Includes uint16_t definition                    */
#include <stdbool.h>       /* Includes true/false definition                  */
#include "header.h"        /* Function / Parameters                           */
#include <libpic30.h>
#include <uart.h>


/******************************************************************************/
/* Global Variable Declaration                                                */
/******************************************************************************/

/* i.e. uint16_t <variable_name>; */


/******************************************************************************/
/* Configuartion                                                              */
/******************************************************************************/

// Select Oscillator and switching.
_FOSCSEL(FNOSC_FRCPLL & IESO_OFF);
// Select clock.
_FOSC(POSCMD_NONE & OSCIOFNC_ON & IOL1WAY_ON & FCKSM_CSDCMD);
// Watchdog Timer.
_FWDT(FWDTEN_OFF);
// Select debug channel.
_FICD(ICS_PGD1 & JTAGEN_OFF);



/******************************************************************************/
/* Main Program                                                               */
/******************************************************************************/

/*
void SetTX() {
    __builtin_write_OSCCONL(OSCCON & 0xBF);
    RPINR18bits.U1RXR = 0; // RP2
    RPOR1bits.RP2R = 3;  // 3 est U1TX
    __builtin_write_OSCCONL(OSCCON | 0x40);
}

void SetRX() {
    __builtin_write_OSCCONL(OSCCON & 0xBF);
    RPOR1bits.RP2R = 0;  // 3 est U1TX
    RPINR18bits.U1RXR = 5; // RP5
    __builtin_write_OSCCONL(OSCCON | 0x40);
}

*/


int16_t main(void)
{
    // Initialize IO ports and peripherals.
    ConfigureOscillator();
    InitApp();

    while(1) {
        //__delay_ms(500);
        //led ^= 1;

        //char Txdata[] = {'M','i','c','r','o','c','h','i','p','\0'};

        //SetTX();
       //putsUART1 ((unsigned int *)Txdata);
       //SetRX();



    }
}

